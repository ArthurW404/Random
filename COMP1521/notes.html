<html>
<head>
<title>Week 01 Lectures</title>
<link href='notes.css' rel='stylesheet' type='text/css'>
</head>
<body>
<p><span class='title'>Week 01 Lectures</span><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='section'>Course Introduction</span></td><td align='right'></td></tr></table>
<p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>COMP1521 19T2<br>Computer Systems Fundamentals</span></td><td align='right'><small>2/74</small></td></tr></table>
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/intro/chip0-small.jpg]" src="Pics/intro/chip0-small.jpg">
</div><p>
<div class='center'>
LiC: &nbsp; Salil Kanhere, &nbsp;&nbsp;&nbsp; Admin: Jashank Jeremy
</div>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Course Staff</span></td><td align='right'><small>3/74</small></td></tr></table>
<p>
The Cast <small>(of thousands)</small>:
<ul>
<li> Convenor: Salil Kanhere
<li> Lecturers: Salil Kanhere (Stream A), Zainab Abaid (Stream B)
<li> Course Admin: Jashank Jeremy
<li> Tutors: <br>
<span style="font-size:80%">
<nobr>Marlene Baquiran,</nobr>
<nobr>Dylan Brotherston,</nobr>
<nobr>Emily Chen,</nobr>
<nobr>Ryan Fallah,</nobr>
<nobr>Yongtong Feng,</nobr>
<nobr>Aydin Itil,</nobr>
<nobr>Jashank Jeremy,</nobr>
<nobr>Melena Jordanova,</nobr>
<nobr>Michael Kedar,</nobr>
<nobr>Sam Lazarus,</nobr>
<nobr>Hayden Le,</nobr>
<nobr>Kaiqi Liang,</nobr>
<nobr>Annie Liu,</nobr>
<nobr>Michael Manansala,</nobr>
<nobr>Nhat Nguyen,</nobr>
<nobr>Connor O'Shea,</nobr>
<nobr>Oliver Richards,</nobr>
<nobr>Clifford Sessel,</nobr>
<nobr>Angus Worrall,</nobr>
<nobr>James Ye,</nobr>
<nobr>Michael Yoo,</nobr>
<nobr>Lance Young</nobr>
</span>
<li> Lab assistants:<br>
<span style="font-size:80%">
<nobr>Callum Avery,</nobr>
<nobr>Jeremy Chiu,</nobr>
<nobr>Selina Chua,</nobr>
<nobr>Yunzhu Duan,</nobr>
<nobr>Yutian Li,</nobr>
<nobr>Dong Luo,</nobr>
<nobr>Andrew Trout,</nobr>
<nobr>Livia Wijayanti,</nobr>
<nobr>Yue Wu,</nobr>
</span>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>COMP1521 on the Web</span></td><td align='right'><small>4/74</small></td></tr></table>
<p>
Primary entry point is Webcms3
<p>
&nbsp;&nbsp; <a target="_blank" href="http://webcms3.cse.unsw.edu.au/COMP1521/19T2/">http://webcms3.cse.unsw.edu.au/COMP1521/19T2/</a>
<p>
Most of the <i>content</i> lives under
<p>
&nbsp;&nbsp; <font color='#000099'>/home/cs1521/web/19T2/... </font> &nbsp;&nbsp; <small>(e.g.lecs,labs,tutes,...)</small>
<p>
Most content is web-accessible via
<p>
&nbsp;&nbsp; <a target="_blank" href="http://cgi.cse.unsw.edu.au/~cs1521/19T2/index.php">http://cgi.cse.unsw.edu.au/~cs1521/19T2/index.php</a>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... COMP1521 on the Web</span></td><td align='right'><small>5/74</small></td></tr></table>
<p>
Most material on Webcms3 is publically readable.
<p>
Login to Webcms3 is via zID/zPass, and is needed for
<ul>
<li> quizzes, polls, comments/forums, forming groups, ...
</ul>
&nbsp;<br>
Submit work via <large><code>give</code></large> &nbsp; <small>(on cmd line or via Webcms3)</small>
<p>
Check marks via <large><code>sturec</code></large> &nbsp; <small>(on cmd line or via Webcms3)</small>
<p>&nbsp;<p>
For questions: use Webcms3 forum or email <large><code>cs1521@cse</code></large>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Me</span></td><td align='right'><small>6/74</small></td></tr></table>
<p>
Research:
<ul>
<li> Internet of Things, Cyber Physical Systems, Blockchain, Applied Machine Learning, Security
</ul>
Teaching:
<ul>
<li> UG: &nbsp;COMP{1911,1917,1921,3331}
<li> PG: &nbsp;COMP{9331,9333,9337}
</ul>
Admin:
<ul>
<li> Postgradute Reserch Coordinator
</ul>
<small>
Life:
<ul>
<li> Technology, &nbsp;Movies, &nbsp;Metal/Rock, &nbsp;Lifting Heavy Things, &nbsp;...
</ul>
</small>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>You</span></td><td align='right'><small>7/74</small></td></tr></table>
<p>
Students in this course have completed:
<ul>
<li> COMP1511 or COMP1917 or COMP1911 <small>(maybe with bridging)</small>
</ul>
Everyone has learned <em>fundamental C programming</em>
<p>
COMP1511/1917 also studied <em>linked lists</em>, <em>ADTs</em> and <em>sorting</em>
<p>
Since not everyone has seen these, we won't use them
<p>
For this week ...
<ul>
<li> review/strengthen C knowledge
<li> introduce/revise core data structures &nbsp;<small>(stacks, queues)</small>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 1: Your Background</span></td><td align='right'><small>8/74</small></td></tr></table>
<p>
Poll to fill out right now on Zeetings
<p>&nbsp;<p>
<big>www.zeetings.com/cs1521</big>
<p>&nbsp;<p>
Accessible from most devices via a browser
<p>
Will use Zeetings occasionally for feedback during lectures
<p>&nbsp;<p>

<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Course Goals</span></td><td align='right'><small>9/74</small></td></tr></table>
<p>
COMP1511/1911/1917 ...
<ul>
<li> gets you thinking like a <em>programmer</em>
<li> solving problems by developing programs
<li> expressing your solution in the C language
</ul>
COMP1521 ...
<ul>
<li> gets you thinking like a <em>systems programmer</em>
<li> with a deep understanding of run-time behaviour
<li> and better able to reason about your C programs
</ul>
<br>
<b>Note:</b> these are <i>not</i>&nbsp; the same goals as COMP2121
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>COMP1511/1911/1917 vs COMP1521</span></td><td align='right'><small>10/74</small></td></tr></table>
<p>
COMP1511/1911/1917 ...
<p><div class='center'>
<img alt="[Diagram:Pics/intro/jumping-small.jpg]" src="Pics/intro/jumping-small.jpg">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... COMP1511/1911/1917 vs COMP1521</span></td><td align='right'><small>11/74</small></td></tr></table>
<p>
COMP1521 ...
<br>&nbsp;<br>
<p><div class='center'>
<img alt="[Diagram:Pics/intro/military-small.jpg]" src="Pics/intro/military-small.jpg">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... COMP1511/1911/1917 vs COMP1521</span></td><td align='right'><small>12/74</small></td></tr></table>
<p>
or maybe ...
<br>
<p><div class='center'>
<img alt="[Diagram:Pics/intro/tropical-small.jpg]" src="Pics/intro/tropical-small.jpg">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Course Context</span></td><td align='right'><small>13/74</small></td></tr></table>
<p>
<br>
<p><div class='center'>
<img alt="[Diagram:Pics/intro/pre-reqs-small.png]" src="Pics/intro/pre-reqs-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Themes</span></td><td align='right'><small>14/74</small></td></tr></table>
<p>
Major themes ...
<ol>
<li> software components of modern computer systems
<li> how C programs execute <small>(at the machine level)</small>
<li> how to write (MIPS) assembly language
<li> Unix/Linux system-level programming
<li> how operating systems and networks are structured
<li> introduction to concurrency, concurrent programming
</ol>
<br>
Goal: you are able to understand execution of software in detail
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Textbook</span></td><td align='right'><small>15/74</small></td></tr></table>
<p>
There is no prescribed textbook
<p>
Material has been drawn from:
<ul>
<li> "Introduction to Computing Systems: <br>
	from bits and gates to C and beyond", <br>
    Patt and Patel
<li> "From NAND to Tetris: <br>
	Building a modern computer system from first principles", <br>
	Nisan and Schocken
<li> COMP2121 Course Web Site, Parameswaran and Guo
</ul>
Note: always give credit to your sources
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Textbook</span></td><td align='right'><small>16/74</small></td></tr></table>
<p>
<table>
<td><img src="Pics/intro/csapp.jpg"></td>
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
Recommended reference ...
<ul>
<li> <em>Computer Systems:<br> A Programmer's Perspective</em>, <br>
	Bryant and O'Halloren
<li> covers most topics, and quite well
<li> but uses a different machine code
</ul>
Available in UNSW Bookroom
</td>
<table>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Books vs Notes vs Slides</span></td><td align='right'><small>17/74</small></td></tr></table>
<p>
Textbooks ...
<ul>
<li> cover some parts of syllabus in great detail
</ul>
Course Notes ...
<ul>
<li> cover whole syllabus, but not in great detail
</ul>
Lecture Slides ...
<ul>
<li> summarize Course Notes and add exercises
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Systems and Tools</span></td><td align='right'><small>18/74</small></td></tr></table>
<p>
Prac work based on <em>Linux</em> tools
<ul>
<li> all tools available on the <em>CSE lab machines</em>
<li> can use <em>VLab</em> to connect to CSE from home
</ul>
Compilers: <large><code>gcc</code></large> &nbsp;<small>(also <large><code>dcc</code></large> on CSE machines)</small>
<p>
Assembly language: &nbsp;MIPS&nbsp; on &nbsp;<large><code>QtSpim</code></large> &nbsp;<small>(also <large><code>xspim</code></large> in CSE)</small>
<p>
Use your own favourite text editor &nbsp; <small>( I use <tt>gedit</tt> )</small>
<p>
Other tools: &nbsp;&nbsp;<large><code>make</code></large>, &nbsp;&nbsp;<large><font color="#008800"><b><code>gdb</code></b></font></large>, &nbsp;&nbsp;<large><font color="#008800"><b><code>man</code></b></font></large>, &nbsp;&nbsp;<large><code>bc -l</code></large>
<p>
Learn to love the <em>shell</em> and command-line ... very useful
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Classes</span></td><td align='right'><small>19/74</small></td></tr></table>
<p>
Lectures ...
<ul>
<li> 4 hours/week for 9 Weeks &nbsp; <small>(a la UNSW3+)</small>
<li> all lectures will be video'd (Echo360 <i>and</i> YouTube)
</ul>
Tutorials ...
<ul>
<li> 10 Weeks, 1 hour tute, followed by 2-hour lab
<li> explore lecture material via exercises
</ul>
Labs ...
<ul>
<li> small(ish) implementation tasks, done in pairs
<li> give skills practice <small>(leading on to assignments/exam)</small>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Classes</span></td><td align='right'><small>20/74</small></td></tr></table>
<p>
"Mid"-term Break: NONE
<p>
Public Holiday: Monday Week 2 &nbsp; <small>(sigh!!)</small>
<p>
Result: Stream A will be behind Stream B by one lecture
<p>
AND if you have tute/lab on Monday
<ul>
<li> your tute/lab is rescheduled to the following week (Week 3)
<li> BUT your lab 1 submission is still due by 08:59 am Monday, Week 2
<li> moving forward you will work on Lab X on Monday, Week (X+1) and it will be due by Monday 08:59am, Monday Week (X+2).
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Assessments</span></td><td align='right'><small>21/74</small></td></tr></table>
<p>
<em>Lab exercises</em> contribute 10% to overall mark.
<p>
Ideally, the lab exercise for Week X must be
<ul>
<li> submitted before Monday 9am of Week X+1
<li> demonstrated to tutor <i>during</i> Week X lab <br>
   OR, demonstrated <i>at the start of</i> Week X+1 lab
<li> aim of demo is to get feedback on design and style
</ul>
Late submissions will get <font color='#009900'>feedback</font> and <font color='#996600'>reduced mark</font>.
<p>
Exceptionally good submissions can get bonus (A+)
<p>
Total mark for labs can be &gt; 10 &nbsp; <small>(capped at 11)</small>.
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Assessments</span></td><td align='right'><small>22/74</small></td></tr></table>
<p>
Two <em>assignments</em> ...
<ul>
<li> Ass1: Assembly Language, &nbsp; weeks 3-6, &nbsp; 9 marks
<li> Ass2: C Programming, &nbsp; weeks 7-10, &nbsp; 11 marks
<li> both assignments are completed <em>individually</em>
<li> can be completed on your own machine
<ul>
<li> but you <i>must</i> test on the CSE machines before you submit
</ul>
</ul>
Late penalty: 1% off max mark for each hour late
<br>&nbsp;<p>
Good time management avoids late penalties
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Quizzes</span></td><td align='right'><small>23/74</small></td></tr></table>
<p>
Six small online quizzes ...
<ul>
<li> 3-4 questions, multiple-choice format
<li> primarily for review of recent topics
<li> taken in your own time <small>(via Webcms3)</small>
</ul>
Contribute 10% towards final mark (best 5 of the 6 quizzes)
<p>
Starting this week ... C revision quiz
<p>
Then in weeks 2, 4, 6, 8, 10
<p>
Each quiz due before Monday 8:59am of the following week
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Blogs</span></td><td align='right'><small>24/74</small></td></tr></table>
<p>
Keep a blog about what you're learning
<ul>
<li> write it at least weekly
<li> reflect on and plan your learning
</ul>
Bonus up to 1 mark if
<ul>
<li> you maintain regularly (weekly)
<li> what you write is interesting
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Misconduct</span></td><td align='right'><small>25/74</small></td></tr></table>
<p>
<div class='center'>
E.g. plagiarism, contracting, trolling, harassment, ...
</div>
<p><div class='center'>
<img alt="[Diagram:Pics/intro/noose1-small.jpg]" src="Pics/intro/noose1-small.jpg">
</div><p>
<div class='center'>
Just Don't Do it
</div>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Final Exam</span></td><td align='right'><small>26/74</small></td></tr></table>
<p>
3-hour on-line <s>torture</s> exam during the exam period.
<p>
Held in CSE labs &nbsp; <small>(must know lab environment)</small>
<p>
On-line documentation available in exam:
<ul>
<li> MIPS / QtSpim / C quick reference guides
<li> Unix Programmers Manual (<tt>man</tt>) &nbsp;<small>(very handy)</small>
</ul>
Format:
<ul>
<li> some programming exercises &nbsp; (Prac)
<li> some descriptive/analytical questions &nbsp; (Theory)
</ul>
How to pass? &nbsp; Practice, practice, practice, ... 
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Course Assessment</span></td><td align='right'><small>27/74</small></td></tr></table>
<p>
<pre style="font-size:16pt">
CourseWorkMark = QuizMark + LabMark + Ass1Mark + Ass2Mark
                                                   <span style="font-size:12pt">(out of 40)</span>
ExamPracMark   = marks for prac questions on final exam
                                                   <span style="font-size:12pt">(out of 30)</span>
ExamTheoryMark = marks for written questions on final exam
                                                   <span style="font-size:12pt">(out of 30)</span>
ExamMark       = ExamPracMark + ExamTheoryMark     <span style="font-size:12pt">(out of 60)</span>

ExamOK         = ExamMark &geq; 24/60                 <span style="font-size:12pt">(true/false)</span>

FinalMark      = CourseWorkMark + ExamMark        <span style="font-size:12pt">(out of 100)</span>

FinalGrade     = UF, if !ExamOK &amp;&amp; FinalMark &geq; 50
               = FL, if FinalMark &lt; 50/100 
               = PS, if 50/100 &leq; FinalMark < 65/100 
               = CR, if 65/100 &leq; FinalMark < 75/100 
               = DN, if 75/100 &leq; FinalMark < 85/100 
               = HD, if FinalMark &geq; 85/100   
</pre>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Supplementary Exams</span></td><td align='right'><small>28/74</small></td></tr></table>
<p>
Supplementary Exams are available to students who
<ul>
<li> do <em>not</em> attend the final exam
<li> have a documented reason for not attending
</ul>

<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='section'>Computer Systems</span></td><td align='right'></td></tr></table>
<p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>What they used to look like</span></td><td align='right'><small>30/74</small></td></tr></table>
<p>
ENIAC ...
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/system/eniac-small.jpg]" src="Pics/system/eniac-small.jpg">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Computer Systems</span></td><td align='right'><small>31/74</small></td></tr></table>
<p>
Component view of typical modern computer system
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/system/components-small.png]" src="Pics/system/components-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Processor</span></td><td align='right'><small>32/74</small></td></tr></table>
<p>
Modern processors provide
<ul>
<li> control, arithmetic, logic, bit operators
<li> relatively small set of simple operations
<li> with a range of ways to determine data locations
<li> small amount of very fast storage (registers)
<li> small number of control registers (e.g. PC)
<li> fast fetch-decode-execute cycle (ns)
<li> access to system bus to communicate with other components
<li> all integrated on a single chip
</ul>
<small>We do not consider multi-core CPUs in this course</small>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Storage</span></td><td align='right'><small>33/74</small></td></tr></table>
<p>
Memory (main memory) consists of
<ul>
<li> very large random-addressable array of bytes
<li> can fetch single bytes into CPU registers
<li> can fetch multi-byte chunks into CPU (e.g. 4-byte int)
<li> typically: access time 0.1 &micro;s, size 64 GB
</ul>
Disk storage consist of
<ul>
<li> very very large block-oriented storage 
<li> often on spinning disk, fetching 512B-4KB per request
<li> typically: access time 30 ms, size 8 TB
<li> nowadays, SSD: access time 100 &micro;s, size 512GB
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Storage</span></td><td align='right'><small>34/74</small></td></tr></table>
<p>
Run-time memory usage depends on language processor.
<p>
How typical C compiler uses the memory:
<p><div class='center'>
<img alt="[Diagram:Pics/memory/regions-small.png]" src="Pics/memory/regions-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Computer System Layers</span></td><td align='right'><small>35/74</small></td></tr></table>
<p>
View of software layers in typical computer system
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/system/layers-small.png]" src="Pics/system/layers-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>C Program Life-cycle</span></td><td align='right'><small>36/74</small></td></tr></table>
<p>
From source code to machine code ...
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/compile/compilation-small.png]" src="Pics/compile/compilation-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 2: C Compiler Stages</span></td><td align='right'><small>37/74</small></td></tr></table>
<p>
Using a small program
<p><pre>
#include "x.h"
#define NUM 10

int main(void)
{
   int x = NUM;
   printf("Hello\n");
   return 0;
}
</pre><p>
investigate intermediate stages of compilation
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='section'>C Revisited</span></td><td align='right'></td></tr></table>
<p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>What (I assume) You Know</span></td><td align='right'><small>39/74</small></td></tr></table>
<p>
Given a problem specification ...
<ul>
<li> design an algorithmic solution
<li> describe your solution in C code, using ...
<ul>
<li> variables, assignment, tests (<large><code>==</code></large>, <large><code>!</code></large>, <large><code>&lt;=</code></large>, <large><code>&&</code></b></font></large>, etc)
<li> <large><code>if</code></large>, <large><code>while</code></large>, <large><code>for</code></large>, <large><code>break</code></large>, <large><code>scanf()</code></large>, <large><code>printf()</code></large>
<li> functions, <large><code>return</code></large>, prototypes, <large><code>*.h</code></large>, <large><code>*.c</code></large>
<li> arrays, files, structs, pointers, <large><code>malloc()</code></large>, <large><code>free()</code></large>
</ul>
</ul>
I don't assume that you know ...
<ul>
<li> linked structures, ADTs, sorting, <em>recursion</em>, <em>bit operations</em>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Type Definitions</span></td><td align='right'><small>40/74</small></td></tr></table>
<p>
Reminder: you can give a name to a C type definition e.g.
<p><pre>
typedef int Integer;
typedef long long int BigInt;
typedef unsigned char Byte;
typedef struct { int x; int y; } Coord;
</pre><p>
and then use the name instead of the type definition e.g.
<p><pre>
Byte  byte;         <comment>// one 8-bit variable</comment>
Coord here, there;  <comment>// two Coord variables</comment>
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Assignment as Expression</span></td><td align='right'><small>41/74</small></td></tr></table>
<p>
Assignments can be treated as expressions returning a value
<p><pre>
x = 5;          <comment>// returns 5</comment>
</pre><p>
Can be useful
<p><pre>
x = y = z = 0;  <comment>// equiv to x = (y = (z = 0))</comment>
</pre><p>
Can be dangerous
<p><pre>
if (x = 0)      <comment>// "test" always fails</comment>
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Assignment as Expression</span></td><td align='right'><small>42/74</small></td></tr></table>
<p>
Assignment-as-expression often used to simplify loops, e.g.
<p><pre>
<comment>// read stdin one char at-a-time</comment>
while ((ch = getchar()) != EOF) {
   <comment>// do something with ch</comment>
}
</pre><p>
rather than
<p><pre>
ch = getchar();
while (ch != EOF) {
   <comment>// do something with ch</comment>
   ch = getchar();
}
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 3: Assignment as Expression</span></td><td align='right'><small>43/74</small></td></tr></table>
<p>
In the example above, we wrote:
<p><pre>
<comment>// read stdin one char at-a-time</comment>
while <font color='#009900'>(</font><font color='#0000CC'>(</font>ch = getchar()<font color='#0000CC'>)</font> != EOF<font color='#009900'>)</font> {
   <comment>// do something with ch</comment>
}
</pre><p>
which reads a char into <large><code>ch</code></large> and tests it against <large><code>EOF</code></large>
<p>
What would the following code do?
<p><pre>
<comment>// read stdin one char at-a-time</comment>
while <font color='#009900'>(</font>ch = getchar() != EOF<font color='#009900'>)</font> {
   <comment>// do something with ch</comment>
}
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Ignoring Expression Results</span></td><td align='right'><small>44/74</small></td></tr></table>
<p>
We usually ignore the value returned by an assignment.
<p>
Some C functions return a result which is usually ignored, e.g.
<p><pre>
int x = 123, y = 42;
printf("%d %d\n", x, y);
</pre><p>
<large><code>printf()</code></large> returns the number of characters printed.
<p>&nbsp;<p>
<b>Exercise:</b> what value does the above <large><code>printf()</code></large> return?
<p>
Go to www.zeetings.com/cs1521
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Ignoring Expression Results</span></td><td align='right'><small>45/74</small></td></tr></table>
<p>
Return values not related to function semantics
<ul>
<li> are typically success/failure status
</ul>
E.g. <large><code>main()</code></large> returns zero (success) and non-zero (error)
<p>
Ignored return error statuses are generally
<ul>
<li> extremely unlikely to occur
<li> not fatal if the failure occurs
</ul>
&nbsp;<br>
Note: <large><code>errno</code></large> global variable and <large><code>perror()</code></large> function
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Fine Control</span></td><td align='right'><small>46/74</small></td></tr></table>
<p>
Good programming style often dictates ...
<ul>
<li> control loops only through termination condition
<li> use <large><code>if</code></large> to control if only part of loop body needed
<li> have one <large><code>return</code></large> per function
<li> exit program only via <large><code>return</code></large> in <large><code>main()</code></large>
</ul>
C has constructs to violate all of these
<ul>
<li> <large><code>break</code></large> and <large><code>continue</code></large> for fine loop control
<li> multiple <large><code>return</code></large> statements within a function
<li> <large><code>exit</code></large> and <large><code>assert</code></large> terminate program early
<li> but, used carefully, can make code easier to understand
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Fine Control</span></td><td align='right'><small>47/74</small></td></tr></table>
<p>
Example: <small>scan <large><code>a[N]</code></large>, stop on zero or at end, ignore negative values</small>
<p><pre>
for (i = 0; i < N; i++) {
   if (a[i] == 0) break;
   if (a[i] < 0) continue;
   sum += a[i];
}

<comment>/* vs */</comment>

for (i = 0; i < N && a[i] != 0; i++) {
   if (a[i] > 0) {
      sum += a[i];
   }
}
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Stacks, Queues, PriorityQs</span></td><td align='right'><small>48/74</small></td></tr></table>
<p>
Computer systems frequently make use of:
<ul>
<li> <em>stacks</em> ... last-in-first-out lists
<small>
<ul>
<li> e.g. used to represent function local variables
</ul>
</small>
<li> <em>queues</em> ... first-in-first-out lists
<small>
<ul>
<li> e.g. used to ensure fair access to a resource
</ul>
</small>
<li> <em>priority queues</em> ... highest-priority-out lists
<small>
<ul>
<li> e.g. used to represent weighted lists of processes
</ul>
</small>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Stacks, Queues, PriorityQs</span></td><td align='right'><small>49/74</small></td></tr></table>
<p>
All of these data structures have
<ul>
<li> a sequence of items
<li> an operation to <em>insert</em> an item into the sequence
<li> an operation to <em>remove</em> an item from the sequence
</ul>
Data structures differ in
<ul>
<li> stack ... <em>insert</em> adds on <em>top</em>, &nbsp;<em>removes</em> from <em>top</em>
<li> queue ... <em>insert</em> adds at <em>tail</em>, &nbsp;<em>removes</em> from <em>head</em>
<li> priorityQ ... <em>inserts</em> in priority <em>order</em>, &nbsp;<em>removes</em> from <em>head</em>
</ul>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>50/74</small></td></tr></table>
<p>
Starting from data containing one item, insert 3
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp1-small.png]" src="Pics/clang/sqp1-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>51/74</small></td></tr></table>
<p>
Then insert 6
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp2-small.png]" src="Pics/clang/sqp2-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>52/74</small></td></tr></table>
<p>
Then insert 2
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp3-small.png]" src="Pics/clang/sqp3-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>53/74</small></td></tr></table>
<p>
Then remove item
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp4-small.png]" src="Pics/clang/sqp4-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>54/74</small></td></tr></table>
<p>
Then insert 4
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp5-small.png]" src="Pics/clang/sqp5-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>55/74</small></td></tr></table>
<p>
Then remove item
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp6-small.png]" src="Pics/clang/sqp6-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='cont'>... Example Stack/Queue/PriorityQ Usage</span></td><td align='right'><small>56/74</small></td></tr></table>
<p>
Then remove item
<br>&nbsp;
<p><div class='center'>
<img alt="[Diagram:Pics/clang/sqp7-small.png]" src="Pics/clang/sqp7-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Stack Data Structure</span></td><td align='right'><small>57/74</small></td></tr></table>
<p>
Stack: Last-in, First-out (LIFO) protocol
<ul>
<li> insert operation called <large><code>push()</code></large>
<li> remove operation called <large><code>pop()</code></large>
<li> has a top <small>(last item added)</small> and a size
</ul>
Stack interface:
<p><pre>
typedef struct _stack { ... } Stack;
void initStack(Stack *s);
int  pushStack(Stack *s, Item val);
Item popStack(Stack *s);
int  isEmptyStack(Stack s);
...
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Example Stack Client</span></td><td align='right'><small>58/74</small></td></tr></table>
<p>
A program to use a stack of <large><code>int</code></large> values
<p><pre><small>
#include &lt;stdio.h&gt;
#include "Stack.h"
int main(void)
{
   Stack myStack; <comment>// uninitialized Stack</comment>
   int   x;       <comment>// variable to hold inputs</comment>

   initStack(&myStack);
   while (scanf("%d",&x) == 1) {
      if (x < 0) break;
      if (!pushStack(&myStack, x)) break;
   }
   while (!isEmptyStack(myStack)) {
      printf("%d\n", popStack(&myStack));
   }
   return 0;
}
</small></pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 4: Implementing Stacks</span></td><td align='right'><small>59/74</small></td></tr></table>
<p>
Assume that <large><code>Stack.h</code></large> contains
<p><pre>
#define MAX_STACK 100
typedef int Item;
typedef struct _stack {
    int  top;
    Item items[MAX_STACK];
} Stack;
void initStack(Stack *s);
int  pushStack(Stack *s, Item val);
Item popStack(Stack *s);
int  isEmptyStack(Stack s);
void showStack(Stack s);
</pre><p>
Implement the stack functions
<p><hr><p>
<continuex>
<p>
<p><div class='center'>
<img alt="[Diagram:Pics/clang/stack-type-small.png]" src="Pics/clang/stack-type-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 5: Bracket Matching</span></td><td align='right'><small>61/74</small></td></tr></table>
<p>
Write a program to match arbitrarily-nested brackets
<ul>
<li> using a stack of <large><code>char</code></large> values
<li> pushes opening brackets onto stack
<li> on finding close bracket, pop and check for match
</ul>
Examples:
<p><pre>
$ <b>./bm</b>
if (...) { abc[i] += 5 }
OK
$ <b>./bm</b>
( [ { ( ... ) } [ ... ] ] )
OK
$ <b>./bm</b>
( ( [ ] } ) )
Mismatch on }
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 6: Quiz Time</span></td><td align='right'><small>62/74</small></td></tr></table>
<p>
Consider the previously discussed algorithm for bracket matching.
<p>
The maximum number of brackets that appear on the stack AT ANY ONE TIME when the algorithm analyzes: (()(())(())) are:
</p>
Go to www.zeetings.com/cs1521
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 7: Dynamic Stacks</span></td><td align='right'><small>63/74</small></td></tr></table>
<p>
The <large><code>Stack</code></large> can fill up ... annoying.
<p>
Consider an alternative implementation to solve this problem:
<p><div class='center'>
<img alt="[Diagram:Pics/clang/dynamic-stack-small.png]" src="Pics/clang/dynamic-stack-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Queue Data Structure</span></td><td align='right'><small>64/74</small></td></tr></table>
<p>
Queue: First-in, First-out (FIFO) protocol
<ul>
<li> insert operation called <large><code>enter</code></large> (or <large><code>enqueue()</code></large>)
<li> remove operation called <large><code>leave</code></large> (or <large><code>dequeue()</code></large>)
<li> has a head <small>(first item added)</small>, a tail <small>(last item added)</small>, and a size
</ul>
Queue interface:
<p><pre>
typedef struct _queue { ... } Queue;
void initQueue(Queue *q);
int  enterQueue(Queue *q, Item val);
Item leaveQueue(Queue *q);
int  isEmptyQueue(Queue q);
...
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 8: Implementing a Queue</span></td><td align='right'><small>65/74</small></td></tr></table>
<p>
Give two implementations for a <large><code>Queue</code></large> data type
<ul>
<li> one always has the head at <large><code>items[0]</code></large>
<li> one has the head and tail moving "circularly"
</ul>
<p><div class='center'>
<img alt="[Diagram:Pics/clang/queues-small.png]" src="Pics/clang/queues-small.png">
</div><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Priority Queue Data Structure</span></td><td align='right'><small>66/74</small></td></tr></table>
<p>
Queue: Highest-priority-out protocol
<ul>
<li> insert operation called <large><code>enter</code></large> (or <large><code>enqueue()</code></large>)
<li> remove operation called <large><code>leave</code></large> (or <large><code>dequeue()</code></large>)
<li> has a head <small>(next for removal)</small>, a tail <small>(lowest-priority)</small>, and a size
</ul>
Priority Queue interface:
<p><pre>
typedef struct _priorityq { ... } PriorityQ;
void initPriorityQ(PriorityQ *q);
int  enterPriorityQ(PriorityQ *q, Item val);
Item leavePriorityQ(PriorityQ *q);
int  isEmptyPriorityQ(PriorityQ q);
...
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='section'>Bit Manipulation</span></td><td align='right'></td></tr></table>
<p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Bits in Bytes in Words</span></td><td align='right'><small>68/74</small></td></tr></table>
<p>
Values that we normally treat as atomic can be viewed as bits, e.g.
<ul>
<li> <large><code>char</code></large> = 1 byte = 8 bits
	&nbsp;&nbsp; <small>(<large><code>'a'</code></large> is <large><code>01100001</code></large>)</small>
<li> <large><code>short</code></large> = 2 bytes = 16 bits
	&nbsp;&nbsp; <small>(<large><code>42</code></large> is <large><code>0000000000101010</code></large>)</small>
<li> <large><code>int</code></large> = 4 bytes = 32 bits
	&nbsp;&nbsp; <small>(<large><code>42</code></large> is <large><code>0000000000</code></large>...<large><code>0000101010</code></large>)</small>
<li> <large><code>double</code></large> = 8 bytes = 64 bits
</ul>
The above are common sizes and don't apply on all hardware <br>
<small>(e.g. <large><code>sizeof(int)</code></large> might be 16 or 64 bits, <large><code>sizeof(double)</code></large> might be 32 bits)</small>
<p>
C provides a set of operators that act bit-by-bit on pairs of bytes.
<p>
E.g. <large><code>(10101010 <font color='#CC0000'>&</font> 11110000)</code></large> yields <large><code>10100000</code></large> &nbsp; <small>(bitwise AND)</small>
<p>
C bitwise operators: &nbsp;&nbsp; <large><code>&   &nbsp;|   &nbsp;^   &nbsp;~   &nbsp;&lt;&lt;   &nbsp;>&gt;</code></large>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Binary Constants</span></td><td align='right'><small>69/74</small></td></tr></table>
<p>
Literal numbers in decimal, hexadecimal, octal, binary.
<p>
In hexadecimal, each digit represents 4 bits
<p><pre>
   0100 1000 1111 1010 1011 1100 1001 0111
0x   4    8    F    A    B    C    9    7
</pre><p>
In octal, each digit represents 3 bits
<p><pre>
   01 001 000 111 110 101 011 110 010 010 111
0   1  1   0   7   6   5   3   6   2   2   7
</pre><p>
In binary, each digit represents 1 bit
<p><pre>
0b01001000111110101011110010010111
</pre><p>
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Bitwise AND</span></td><td align='right'><small>70/74</small></td></tr></table>
<p>
The <large><code>&</code></large> operator
<ul>
<li> takes two values (1,2,4,8 bytes), treats as sequence of bits
<li> performs logical AND on each corresponding pair of bits
<li> result contains same number of bits as inputs
</ul>
Example:
<p><pre>
  00100111           AND | 0  1
& 11100011           ----|-----
  --------             0 | 0  0
  00100011             1 | 0  1
</pre><p>
Used for e.g. checking whether a bit is set
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 9: Checking for odd numbers</span></td><td align='right'><small>71/74</small></td></tr></table>
<p>
One obvious way to check for odd numbers in C
<p><pre>
int isOdd(int n) { return (n%2) == 1; }
</pre><p>
Could we use <large><code>&</code></large> to achieve the same thing? How?
<p><br><p>
Aside: an alternative to the above
<p><pre>
#define isOdd(n)  ((n)%2) == 1)
</pre><p>
What's the difference between the <em>function</em> and the <em>macro</em>?
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Bitwise OR</span></td><td align='right'><small>72/74</small></td></tr></table>
<p>
The <large><code>|</code></large> operator
<ul>
<li> takes two values (1,2,4,8 bytes), treats as sequence of bits
<li> performs logical OR on each corresponding pair of bits
<li> result contains same number of bits as inputs
</ul>
Example:
<p><pre>
  00100111            OR | 0  1
| 11100011           ----|-----
  --------             0 | 0  1
  11100111             1 | 1  1
</pre><p>
Used for e.g. ensuring that a bit is set
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Bitwise NEG</span></td><td align='right'><small>73/74</small></td></tr></table>
<p>
The <large><code>~</code></large> operator
<ul>
<li> takes a single value (1,2,4,8 bytes), treats as sequence of bits
<li> performs logical negation of each bit
<li> result contains same number of bits as input
</ul>
Example:
<p><pre>
~ 00100111           NEG | 0  1
  --------           ----|-----
  11011000               | 1  0
</pre><p>
Used for e.g. creating useful bit patterns
<p><hr><p>
<table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><span class='heading'>Exercise 10: Bit-manipulation</span></td><td align='right'><small>74/74</small></td></tr></table>
<p>
Assuming 8-bit quantities and writing answers as 8-bit bit-strings ...
<p>
What are the values of the following:
<ul>
<li> <large><code>25</code></large>, &nbsp; <large><code>65</code></large>, &nbsp; <large><code>~0</code></large>, &nbsp; <large><code>~1</code></large>, &nbsp; <large><code>0xFF</code></large>, &nbsp; <large><code>~0xFF</code></large>
<li> <large><code>(01010101 & 10101010)</code></large>, &nbsp; <large><code>(01010101 | 10101010)</code></large>
<li> <large><code>(x & ~x)</code></large>, &nbsp; <large><code>(x | ~x)</code></large>
</ul>
How can we achieve each of the following:
<ul>
<li> ensure that the 3rd bit from the RHS is set to 1
<li> ensure that the 3rd bit from the RHS is set to 0
</ul>
<p><hr><p>
<small><small>Produced: 8 Aug 2019</small></small>
</body>
</html>
